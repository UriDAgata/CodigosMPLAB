include "P16F887.inc"

        __CONFIG _CONFIG1, ( _CP_OFF & _MCLRE_OFF & _PWRTE_ON & _INTOSC & _LVP_OFF )
        __CONFIG _CONFIG2, _BOR21V

        cblock 0x20
            d1
            d2
            d3
        endc

        ORG 0x00

INICIO
        BANKSEL TRISD
        CLRF TRISC
        BSF TRISD,3
        BANKSEL PORTD
        CLRF PORTD

LED
        CLRF PORTD
        BCF PORTC,0
        BTFSS PORTD,3
        GOTO LED
        GOTO BUCLE

BUCLE
        BSF PORTC,0
        CALL TIEMPO
        CALL TIEMPO
        BCF PORTC,0
        CALL TIEMPO
        CALL TIEMPO
        BTFSC PORTD,3
        GOTO BUCLE
        GOTO LED

TIEMPO
; Delay = 0.5 seconds
; Clock frequency = 4 MHz
; Actual delay = 0.5 seconds = 500000 cycles
; Error = 0 %

        movlw   0x03
        movwf   d1
        movlw   0x18
        movwf   d2
        movlw   0x02
        movwf   d3

Delay_0
        decfsz  d1,f
        goto    $+2
        decfsz  d2,f
        goto    $+2
        decfsz  d3,f
        goto    Delay_0

        goto    $+1
        goto    $+1
        goto    $+1

        RETURN

        END